// AUTOGENERATED FILE
#pragma once

#include <string_view>

#include "barretenberg/common/bb_bench.hpp"
#include "barretenberg/relations/relation_parameters.hpp"
#include "barretenberg/relations/relation_types.hpp"
#include "barretenberg/vm2/generated/columns.hpp"

namespace bb::avm2 {

template <typename FF_> class addressingImpl {
  public:
    using FF = FF_;

    static constexpr std::array<size_t, 58> SUBRELATION_PARTIAL_LENGTHS = { 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
                                                                            3, 4, 3, 3, 3, 3, 3, 3, 3, 4, 5, 3, 3, 3, 3,
                                                                            3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5,
                                                                            5, 5, 5, 3, 3, 3, 3, 3, 3, 3, 5, 4, 4 };

    template <typename AllEntities> inline static bool skip(const AllEntities& in)
    {
        using C = ColumnAndShifts;

        const auto execution_SEL_SHOULD_RESOLVE_ADDRESS =
            in.get(C::execution_sel_bytecode_retrieval_success) * in.get(C::execution_sel_instruction_fetching_success);

        return (execution_SEL_SHOULD_RESOLVE_ADDRESS).is_zero();
    }

    template <typename ContainerOverSubrelations, typename AllEntities>
    void static accumulate(ContainerOverSubrelations& evals,
                           const AllEntities& in,
                           [[maybe_unused]] const RelationParameters<FF>&,
                           [[maybe_unused]] const FF& scaling_factor);
};

template <typename FF> class addressing : public Relation<addressingImpl<FF>> {
  public:
    static constexpr const std::string_view NAME = "addressing";

    // Subrelation indices constants, to be used in tests.
    static constexpr size_t SR_INDIRECT_RECONSTRUCTION = 16;
    static constexpr size_t SR_NUM_RELATIVE_INV_CHECK = 24;
    static constexpr size_t SR_BASE_ADDRESS_CHECK = 25;
    static constexpr size_t SR_NOT_RELATIVE_NO_OVERFLOW_0 = 26;
    static constexpr size_t SR_NOT_RELATIVE_NO_OVERFLOW_1 = 27;
    static constexpr size_t SR_NOT_RELATIVE_NO_OVERFLOW_2 = 28;
    static constexpr size_t SR_NOT_RELATIVE_NO_OVERFLOW_3 = 29;
    static constexpr size_t SR_NOT_RELATIVE_NO_OVERFLOW_4 = 30;
    static constexpr size_t SR_NOT_RELATIVE_NO_OVERFLOW_5 = 31;
    static constexpr size_t SR_NOT_RELATIVE_NO_OVERFLOW_6 = 32;
    static constexpr size_t SR_RELATIVE_RESOLUTION_0 = 33;
    static constexpr size_t SR_RELATIVE_RESOLUTION_1 = 34;
    static constexpr size_t SR_RELATIVE_RESOLUTION_2 = 35;
    static constexpr size_t SR_RELATIVE_RESOLUTION_3 = 36;
    static constexpr size_t SR_RELATIVE_RESOLUTION_4 = 37;
    static constexpr size_t SR_RELATIVE_RESOLUTION_5 = 38;
    static constexpr size_t SR_RELATIVE_RESOLUTION_6 = 39;
    static constexpr size_t SR_INDIRECT_GATING_0 = 41;
    static constexpr size_t SR_INDIRECT_GATING_1 = 42;
    static constexpr size_t SR_INDIRECT_GATING_2 = 43;
    static constexpr size_t SR_INDIRECT_GATING_3 = 44;
    static constexpr size_t SR_INDIRECT_GATING_4 = 45;
    static constexpr size_t SR_INDIRECT_GATING_5 = 46;
    static constexpr size_t SR_INDIRECT_GATING_6 = 47;
    static constexpr size_t SR_INDIRECT_PROPAGATION_0 = 48;
    static constexpr size_t SR_INDIRECT_PROPAGATION_1 = 49;
    static constexpr size_t SR_INDIRECT_PROPAGATION_2 = 50;
    static constexpr size_t SR_INDIRECT_PROPAGATION_3 = 51;
    static constexpr size_t SR_INDIRECT_PROPAGATION_4 = 52;
    static constexpr size_t SR_INDIRECT_PROPAGATION_5 = 53;
    static constexpr size_t SR_INDIRECT_PROPAGATION_6 = 54;
    static constexpr size_t SR_BATCHED_TAGS_DIFF_CHECK = 55;
    static constexpr size_t SR_ADDRESSING_COLLECTION_INV_CHECK = 56;

    static std::string get_subrelation_label(size_t index)
    {
        switch (index) {
        case SR_INDIRECT_RECONSTRUCTION:
            return "INDIRECT_RECONSTRUCTION";
        case SR_NUM_RELATIVE_INV_CHECK:
            return "NUM_RELATIVE_INV_CHECK";
        case SR_BASE_ADDRESS_CHECK:
            return "BASE_ADDRESS_CHECK";
        case SR_NOT_RELATIVE_NO_OVERFLOW_0:
            return "NOT_RELATIVE_NO_OVERFLOW_0";
        case SR_NOT_RELATIVE_NO_OVERFLOW_1:
            return "NOT_RELATIVE_NO_OVERFLOW_1";
        case SR_NOT_RELATIVE_NO_OVERFLOW_2:
            return "NOT_RELATIVE_NO_OVERFLOW_2";
        case SR_NOT_RELATIVE_NO_OVERFLOW_3:
            return "NOT_RELATIVE_NO_OVERFLOW_3";
        case SR_NOT_RELATIVE_NO_OVERFLOW_4:
            return "NOT_RELATIVE_NO_OVERFLOW_4";
        case SR_NOT_RELATIVE_NO_OVERFLOW_5:
            return "NOT_RELATIVE_NO_OVERFLOW_5";
        case SR_NOT_RELATIVE_NO_OVERFLOW_6:
            return "NOT_RELATIVE_NO_OVERFLOW_6";
        case SR_RELATIVE_RESOLUTION_0:
            return "RELATIVE_RESOLUTION_0";
        case SR_RELATIVE_RESOLUTION_1:
            return "RELATIVE_RESOLUTION_1";
        case SR_RELATIVE_RESOLUTION_2:
            return "RELATIVE_RESOLUTION_2";
        case SR_RELATIVE_RESOLUTION_3:
            return "RELATIVE_RESOLUTION_3";
        case SR_RELATIVE_RESOLUTION_4:
            return "RELATIVE_RESOLUTION_4";
        case SR_RELATIVE_RESOLUTION_5:
            return "RELATIVE_RESOLUTION_5";
        case SR_RELATIVE_RESOLUTION_6:
            return "RELATIVE_RESOLUTION_6";
        case SR_INDIRECT_GATING_0:
            return "INDIRECT_GATING_0";
        case SR_INDIRECT_GATING_1:
            return "INDIRECT_GATING_1";
        case SR_INDIRECT_GATING_2:
            return "INDIRECT_GATING_2";
        case SR_INDIRECT_GATING_3:
            return "INDIRECT_GATING_3";
        case SR_INDIRECT_GATING_4:
            return "INDIRECT_GATING_4";
        case SR_INDIRECT_GATING_5:
            return "INDIRECT_GATING_5";
        case SR_INDIRECT_GATING_6:
            return "INDIRECT_GATING_6";
        case SR_INDIRECT_PROPAGATION_0:
            return "INDIRECT_PROPAGATION_0";
        case SR_INDIRECT_PROPAGATION_1:
            return "INDIRECT_PROPAGATION_1";
        case SR_INDIRECT_PROPAGATION_2:
            return "INDIRECT_PROPAGATION_2";
        case SR_INDIRECT_PROPAGATION_3:
            return "INDIRECT_PROPAGATION_3";
        case SR_INDIRECT_PROPAGATION_4:
            return "INDIRECT_PROPAGATION_4";
        case SR_INDIRECT_PROPAGATION_5:
            return "INDIRECT_PROPAGATION_5";
        case SR_INDIRECT_PROPAGATION_6:
            return "INDIRECT_PROPAGATION_6";
        case SR_BATCHED_TAGS_DIFF_CHECK:
            return "BATCHED_TAGS_DIFF_CHECK";
        case SR_ADDRESSING_COLLECTION_INV_CHECK:
            return "ADDRESSING_COLLECTION_INV_CHECK";
        }
        return std::to_string(index);
    }
};

} // namespace bb::avm2
