// AUTOGENERATED FILE
#pragma once

#include <string_view>

#include "barretenberg/common/bb_bench.hpp"
#include "barretenberg/relations/relation_parameters.hpp"
#include "barretenberg/relations/relation_types.hpp"
#include "barretenberg/vm2/generated/columns.hpp"

namespace bb::avm2 {

template <typename FF_> class addressingImpl {
  public:
    using FF = FF_;

    static constexpr std::array<size_t, 62> SUBRELATION_PARTIAL_LENGTHS = {
        3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 3, 5, 3, 5, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5,
        5, 5, 5, 5, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 3, 3, 3, 3, 3, 3, 3, 3, 5, 3, 4, 4
    };

    template <typename AllEntities> inline static bool skip(const AllEntities& in)
    {
        using C = ColumnAndShifts;

        const auto execution_SEL_SHOULD_RESOLVE_ADDRESS =
            in.get(C::execution_sel_bytecode_retrieval_success) * in.get(C::execution_sel_instruction_fetching_success);

        return (execution_SEL_SHOULD_RESOLVE_ADDRESS).is_zero();
    }

    template <typename ContainerOverSubrelations, typename AllEntities>
    void static accumulate(ContainerOverSubrelations& evals,
                           const AllEntities& in,
                           [[maybe_unused]] const RelationParameters<FF>&,
                           [[maybe_unused]] const FF& scaling_factor);
};

template <typename FF> class addressing : public Relation<addressingImpl<FF>> {
  public:
    static constexpr const std::string_view NAME = "addressing";

    // Subrelation indices constants, to be used in tests.
    static constexpr size_t SR_INDIRECT_RECONSTRUCTION = 16;
    static constexpr size_t SR_NUM_RELATIVE_INV_CHECK = 18;
    static constexpr size_t SR_BASE_ADDRESS_CHECK = 20;
    static constexpr size_t SR_NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_0 = 21;
    static constexpr size_t SR_NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_1 = 22;
    static constexpr size_t SR_NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_2 = 23;
    static constexpr size_t SR_NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_3 = 24;
    static constexpr size_t SR_NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_4 = 25;
    static constexpr size_t SR_NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_5 = 26;
    static constexpr size_t SR_NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_6 = 27;
    static constexpr size_t SR_RELATIVE_RESOLUTION_0 = 28;
    static constexpr size_t SR_RELATIVE_RESOLUTION_1 = 29;
    static constexpr size_t SR_RELATIVE_RESOLUTION_2 = 30;
    static constexpr size_t SR_RELATIVE_RESOLUTION_3 = 31;
    static constexpr size_t SR_RELATIVE_RESOLUTION_4 = 32;
    static constexpr size_t SR_RELATIVE_RESOLUTION_5 = 33;
    static constexpr size_t SR_RELATIVE_RESOLUTION_6 = 34;
    static constexpr size_t SR_INDIRECT_GATING_0 = 43;
    static constexpr size_t SR_INDIRECT_GATING_1 = 44;
    static constexpr size_t SR_INDIRECT_GATING_2 = 45;
    static constexpr size_t SR_INDIRECT_GATING_3 = 46;
    static constexpr size_t SR_INDIRECT_GATING_4 = 47;
    static constexpr size_t SR_INDIRECT_GATING_5 = 48;
    static constexpr size_t SR_INDIRECT_GATING_6 = 49;
    static constexpr size_t SR_INDIRECT_PROPAGATION_0 = 50;
    static constexpr size_t SR_INDIRECT_PROPAGATION_1 = 51;
    static constexpr size_t SR_INDIRECT_PROPAGATION_2 = 52;
    static constexpr size_t SR_INDIRECT_PROPAGATION_3 = 53;
    static constexpr size_t SR_INDIRECT_PROPAGATION_4 = 54;
    static constexpr size_t SR_INDIRECT_PROPAGATION_5 = 55;
    static constexpr size_t SR_INDIRECT_PROPAGATION_6 = 56;
    static constexpr size_t SR_BATCHED_TAGS_DIFF_CHECK = 58;
    static constexpr size_t SR_ADDRESSING_COLLECTION_INV_CHECK = 60;

    static std::string get_subrelation_label(size_t index)
    {
        switch (index) {
        case SR_INDIRECT_RECONSTRUCTION:
            return "INDIRECT_RECONSTRUCTION";
        case SR_NUM_RELATIVE_INV_CHECK:
            return "NUM_RELATIVE_INV_CHECK";
        case SR_BASE_ADDRESS_CHECK:
            return "BASE_ADDRESS_CHECK";
        case SR_NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_0:
            return "NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_0";
        case SR_NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_1:
            return "NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_1";
        case SR_NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_2:
            return "NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_2";
        case SR_NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_3:
            return "NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_3";
        case SR_NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_4:
            return "NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_4";
        case SR_NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_5:
            return "NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_5";
        case SR_NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_6:
            return "NOT_RELATIVE_OR_BASE_FAILURE_NO_OVERFLOW_6";
        case SR_RELATIVE_RESOLUTION_0:
            return "RELATIVE_RESOLUTION_0";
        case SR_RELATIVE_RESOLUTION_1:
            return "RELATIVE_RESOLUTION_1";
        case SR_RELATIVE_RESOLUTION_2:
            return "RELATIVE_RESOLUTION_2";
        case SR_RELATIVE_RESOLUTION_3:
            return "RELATIVE_RESOLUTION_3";
        case SR_RELATIVE_RESOLUTION_4:
            return "RELATIVE_RESOLUTION_4";
        case SR_RELATIVE_RESOLUTION_5:
            return "RELATIVE_RESOLUTION_5";
        case SR_RELATIVE_RESOLUTION_6:
            return "RELATIVE_RESOLUTION_6";
        case SR_INDIRECT_GATING_0:
            return "INDIRECT_GATING_0";
        case SR_INDIRECT_GATING_1:
            return "INDIRECT_GATING_1";
        case SR_INDIRECT_GATING_2:
            return "INDIRECT_GATING_2";
        case SR_INDIRECT_GATING_3:
            return "INDIRECT_GATING_3";
        case SR_INDIRECT_GATING_4:
            return "INDIRECT_GATING_4";
        case SR_INDIRECT_GATING_5:
            return "INDIRECT_GATING_5";
        case SR_INDIRECT_GATING_6:
            return "INDIRECT_GATING_6";
        case SR_INDIRECT_PROPAGATION_0:
            return "INDIRECT_PROPAGATION_0";
        case SR_INDIRECT_PROPAGATION_1:
            return "INDIRECT_PROPAGATION_1";
        case SR_INDIRECT_PROPAGATION_2:
            return "INDIRECT_PROPAGATION_2";
        case SR_INDIRECT_PROPAGATION_3:
            return "INDIRECT_PROPAGATION_3";
        case SR_INDIRECT_PROPAGATION_4:
            return "INDIRECT_PROPAGATION_4";
        case SR_INDIRECT_PROPAGATION_5:
            return "INDIRECT_PROPAGATION_5";
        case SR_INDIRECT_PROPAGATION_6:
            return "INDIRECT_PROPAGATION_6";
        case SR_BATCHED_TAGS_DIFF_CHECK:
            return "BATCHED_TAGS_DIFF_CHECK";
        case SR_ADDRESSING_COLLECTION_INV_CHECK:
            return "ADDRESSING_COLLECTION_INV_CHECK";
        }
        return std::to_string(index);
    }
};

} // namespace bb::avm2
